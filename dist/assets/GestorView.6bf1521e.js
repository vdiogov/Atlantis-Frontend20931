import{_ as v,m as b,u as h,d,o as l,c as r,a as e,w as j,e as p,v as f,b as u,f as w,t as g,F as m,r as k}from"./index.aa452145.js";const y={data(){return{senhas:[],senhas2:[],logged:!1,user:"",password:"",guiche:"",jwt:"",userid:"",url:""}},methods:{...b(["obtainToken","refreshToken","removeToken","inspectToken"]),async addNormal(){const a=h();await this.inspectToken().then(s=>{s.status===200?(this.jwt=s.data.access,this.logged=!0):this.refreshToken()}).catch(s=>{this.jwt="",console.log(s)}),this.jwt=d.get("access");var t;typeof this.senhas[0]<"u"?t=parseInt(this.senhas[0].senha)+1:t=1;var n=String(t).padStart(4,"0");console.log(n);const i=JSON.stringify({numero:n,atendente:this.userid,guiche:this.guiche,buzz:!0});this.axios.post("https://atlantis-backend20931.herokuapp.com/queue/",i,{headers:{Authorization:"Bearer "+this.jwt,"Content-Type":"application/json"}}).then(s=>{console.log(s),this.url=s.data.url,a.success("Senha normal chamada.",{timeout:2e3})}).catch(function(s){console.log(s)})},async addSpecial(){const a=h();await this.inspectToken().then(s=>{s.status===200?(this.jwt=s.data.access,this.logged=!0):this.refreshToken()}).catch(s=>{this.jwt="",console.log(s)}),this.jwt=d.get("access");var t;typeof this.senhas2[0]<"u"?t=parseInt(this.senhas2[0].senha)+1:t=1;var n=String(t).padStart(4,"0");console.log(n);const i=JSON.stringify({numero:n,atendente:this.userid,guiche:this.guiche,buzz:!0});this.axios.post("https://atlantis-backend20931.herokuapp.com/queuespecial/",i,{headers:{Authorization:"Bearer "+this.jwt,"Content-Type":"application/json"}}).then(s=>{this.url=s.data.url,a.success("Senha preferencial chamada.",{timeout:2e3})}).catch(function(s){console.log(s)})},async addLast(){const a=h();await this.inspectToken().then(n=>{n.status===200?(this.jwt=n.data.access,this.logged=!0):this.refreshToken()}).catch(n=>{this.jwt="",console.log(n)});const t=JSON.stringify({guiche:this.guiche,buzz:!1});this.jwt=d.get("access"),this.url!=""&&this.axios.patch(this.url,t,{headers:{Authorization:"Bearer "+this.jwt,"Content-Type":"application/json"}}).then(n=>{a.info("Tocando som de chamada.",{timeout:2e3})}).catch(function(n){console.log(n)})},async delNormal(){const a=h();await this.inspectToken().then(t=>{t.status===200?(this.jwt=t.data.access,this.logged=!0):this.refreshToken()}).catch(t=>{this.jwt="",console.log(t)}),this.jwt=d.get("access"),typeof this.senhas[0].url<"u"&&this.axios.delete(this.senhas[0].url,{headers:{Authorization:"Bearer "+this.jwt,"Content-Type":"application/json"}}).then(t=>{a.error("Voltando senha normal.",{timeout:2e3})}).catch(function(t){console.log(t)})},async delSpecial(){const a=h();await this.inspectToken().then(t=>{t.status===200?(this.jwt=t.data.access,this.logged=!0):this.refreshToken()}).catch(t=>{this.jwt="",console.log(t)}),this.jwt=d.get("access"),typeof this.senhas2[0]<"u"&&this.axios.delete(this.senhas2[0].url,{headers:{Authorization:"Bearer "+this.jwt,"Content-Type":"application/json"}}).then(t=>{a.error("Voltando senha preferencial.",{timeout:2e3})}).catch(function(t){console.log(t)})},async delALL(){if(confirm("Deseja realmente limpar as senhas preferenciais chamadas?")){const a=h();await this.inspectToken().then(t=>{t.status===200?(this.jwt=t.data.access,this.logged=!0):this.refreshToken()}).catch(t=>{this.jwt="",console.log(t)}),this.jwt=d.get("access"),typeof this.senhas[0]<"u"&&this.axios.delete("https://atlantis-backend20931.herokuapp.com/queueDELETE/",{headers:{Authorization:"Bearer "+this.jwt,"Content-Type":"application/json"}}).then(t=>{a.error("Limpando painel preferencial.",{timeout:2e3})}).catch(function(t){console.log(t)})}},async delALLSpecial(){if(confirm("Deseja realmente limpar as senhas preferenciais chamadas?")){const a=h();await this.inspectToken().then(t=>{t.status===200?(this.jwt=t.data.access,this.logged=!0):this.refreshToken()}).catch(t=>{this.jwt="",console.log(t)}),this.jwt=d.get("access"),typeof this.senhas2[0]<"u"&&this.axios.delete("https://atlantis-backend20931.herokuapp.com/queuespecialDELETE/",{headers:{Authorization:"Bearer "+this.jwt,"Content-Type":"application/json"}}).then(t=>{a.error("Limpando painel preferencial.",{timeout:2e3})}).catch(function(t){console.log(t)})}},getNormal(){this.axios.get("https://atlantis-backend20931.herokuapp.com/queue/").then(a=>{for(var t=[],n=0;n<a.data.results.length;n++){var i={};i.senha=a.data.results[n].numero,i.buzz=a.data.results[n].buzz,i.guiche=a.data.results[n].guiche,i.url=a.data.results[n].url;var s=new Date(a.data.results[n].updated_at);i.data=s.toLocaleString(),t.push(i)}this.senhas=t}).catch(function(a){console.log(a)})},getSpecial(){this.axios.get("https://atlantis-backend20931.herokuapp.com/queuespecial/").then(a=>{for(var t=[],n=0;n<a.data.results.length;n++){var i={};i.senha=a.data.results[n].numero,i.buzz=a.data.results[n].buzz,i.guiche=a.data.results[n].guiche,i.url=a.data.results[n].url;var s=new Date(a.data.results[n].updated_at);i.data=s.toLocaleString(),t.push(i)}this.senhas2=t}).catch(function(a){console.log(a)})},async getLogin(){h();var a={};a.user=this.user,a.pass=this.password,this.obtainToken(a),await this.inspectToken().then(t=>{t.status===200&&(h().success("Logado com sucesso.",{timeout:2e3}),this.logged=!0,this.jwt=d.get("access"))}).catch(t=>{console.log(t)}),this.axios.get("https://atlantis-backend20931.herokuapp.com/users/?username="+this.user,{headers:{Authorization:"Bearer "+this.jwt,"Content-Type":"application/json"}}).then(t=>{this.userid=t.data.results[0].url}).catch(function(t){console.log(t)})},delLogin(){const a=h();this.password="",this.removeToken(),this.logged=!1,a.success("Deslogado com sucesso.",{timeout:2e3})},reNew(){this.getNormal(),this.getSpecial()}},mounted(){this.reNew()},created(){this.interval=setInterval(()=>{this.reNew()},2e3)},destroyed(){clearInterval(this.interval)}},_={class:"painel"},T=e("h1",null,"Controle do painel",-1),L={key:0,class:"row"},S={class:"input"},x=e("label",{for:"user"},"Usuario:",-1),z=e("br",null,null,-1),C={class:"input"},N=e("label",{for:"password"},"Senha:",-1),A=e("br",null,null,-1),D={class:"input"},E=e("label",{for:"guiche"},"Guiche:",-1),V=e("br",null,null,-1),B={key:1,class:"row"},q=e("br",null,null,-1),F={key:2,class:"row"},I={key:3,class:"row"},R={key:0,class:"painel2"},G={key:0,class:"queue1"},P=e("h2",null,"Normal",-1),U=e("tr",null,[e("td",null,"Senha"),e("td",null,"Guiche"),e("td",null,"Data/Hora")],-1),O={key:1,style:{"border-left":"1px solid #9F9F9F",height:"auto",margin:"20px"}},J={key:2,class:"queue2"},M=e("h2",null,"Preferencial",-1),H=e("tr",null,[e("td",null,"Senha"),e("td",null,"Guiche"),e("td",null,"Data/Hora")],-1),Z={key:1,class:"row"};function K(a,t,n,i,s,c){return l(),r(m,null,[e("div",_,[T,e("form",{onSubmit:t[10]||(t[10]=j(()=>{},["prevent"]))},[s.logged==!1?(l(),r("div",L,[e("div",S,[x,z,p(e("input",{type:"text",id:"user",name:"user","onUpdate:modelValue":t[0]||(t[0]=o=>s.user=o),autocomplete:""},null,512),[[f,s.user]])]),e("div",C,[N,A,p(e("input",{type:"password",id:"password",name:"password","onUpdate:modelValue":t[1]||(t[1]=o=>s.password=o),autocomplete:""},null,512),[[f,s.password]])]),e("div",D,[E,V,p(e("input",{type:"text",id:"guiche",name:"guiche","onUpdate:modelValue":t[2]||(t[2]=o=>s.guiche=o),autocomplete:""},null,512),[[f,s.guiche]])]),e("div",null,[e("button",{class:"button6",onClick:t[3]||(t[3]=o=>c.getLogin())},"Logar")])])):u("",!0),s.logged?(l(),r("div",B,[w(" Usuario: "+g(s.user)+" ",1),q,w(" Guiche: "+g(s.guiche)+" ",1),e("div",null,[e("button",{class:"button5",onClick:t[4]||(t[4]=o=>c.delLogin())},"Deslogar")])])):u("",!0),s.logged?(l(),r("div",F,[e("div",null,[e("button",{class:"button1",onClick:t[5]||(t[5]=o=>c.addNormal())},"Chamar Proximo Normal")]),e("div",null,[e("button",{class:"button4",onClick:t[6]||(t[6]=o=>c.addSpecial())},"Chamar Proximo Preferencial")]),e("div",null,[e("button",{class:"button2",onClick:t[7]||(t[7]=o=>c.addLast())},"Tocar Novamente")])])):u("",!0),s.logged?(l(),r("div",I,[e("div",null,[e("button",{class:"button3",onClick:t[8]||(t[8]=o=>c.delNormal())},"Voltar Senha Normal")]),e("div",null,[e("button",{class:"button3",onClick:t[9]||(t[9]=o=>c.delSpecial())},"Voltar Senha Preferencial")])])):u("",!0)],32)]),s.logged?(l(),r("div",R,[this.senhas.length!=0?(l(),r("div",G,[P,e("table",null,[U,(l(!0),r(m,null,k(s.senhas,o=>(l(),r("tr",null,[e("td",null,g(o.senha),1),e("td",null,g(o.guiche),1),e("td",null,g(o.data),1)]))),256))])])):u("",!0),this.senhas2.length!=0?(l(),r("div",O)):u("",!0),this.senhas2.length!=0?(l(),r("div",J,[M,e("table",null,[H,(l(!0),r(m,null,k(s.senhas2,o=>(l(),r("tr",null,[e("td",null,g(o.senha),1),e("td",null,g(o.guiche),1),e("td",null,g(o.data),1)]))),256))])])):u("",!0)])):u("",!0),s.logged?(l(),r("div",Z,[e("div",null,[this.senhas.length!=0?(l(),r("button",{key:0,class:"button5",onClick:t[11]||(t[11]=o=>c.delALL())},"ZERAR FILA NORMAL")):u("",!0),this.senhas2.length!=0?(l(),r("button",{key:1,class:"button5",onClick:t[12]||(t[12]=o=>c.delALLSpecial())},"ZERAR FILA PREFERENCIAL")):u("",!0)])])):u("",!0)],64)}const W=v(y,[["render",K]]);export{W as default};
